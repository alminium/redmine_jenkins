# $Id$
= Hudson Plugin 1.0.8

Redmie を Hudson と連携させるためのプラグインです。

== Hudsonって？

継続ビルドのためのアプリケーションです。
簡単インストール、設定、親切なUIが特徴です。（他にも良い点は沢山ありますよ！）
詳しくは {Meet Hudson}[http://wiki.hudson-ci.org/display/HUDSON/Meet+Hudson]
作者の川口さんが書かれた紹介記事もあります。 

* {Hudsonを使ったアジャイルな開発入門}[http://gihyo.jp/dev/feature/01/hudson/0001]

Hudson側にも {Redmine用プラグイン}[http://d.hatena.ne.jp/gaooh/20090308/1236509572] があります。

== 必要なもの
* Redmine 0.8.x で動作します。
* Hudson 1.313 をお奨めします。

== Feature
=== ジョブの一覧を表示します

* 名前、説明、最新のビルド結果（番号と結果と日時）、ヘルスレポートを表示します。
* 説明は表示／非表示をその場で切り替えることができます。
* ヘルスレポートで指定したキーワードを見つけると、Hudsonへのリンクを作成します。
* ビルド番号はビルド結果のページにリンクされています。
* ビルドの成果物（アーティファクト）をダウンロードできます。
* 時計アイコンをクリックすると、ジョブをビルドすることができます。
* ハドソンさん？が登場します。（残念ながら怒ったハドソンさんはでてきません）
* ジョブ一覧を Atom で取得できます。

=== ビルドの履歴を表示します

ノートアイコンをクリックしてください。

* ビルド番号、結果と日時を表示します。
* ビルド番号はビルド結果のページにリンクされています。
* コンソールアイコンはコンソール出力のページにリンクされています。

=== ビルドの履歴を活動ページに表示します

* ジョブの名前、ビルド番号、テスト結果（件数だけです）と、チェンジセットを表示します。

=== ビルド結果をチケットに表示します

* 関連したリビジョンがHudsonでビルドされると、ジョブの名前、ビルド番号、結果と日時を表示します。

=== ジョブやビルドに関連するチケットを検索することができます

* カスタムフィールドのように、ジョブやビルドに関連するチケットを検索することができます。
* 指定されたジョブやビルドから関連するリビジョンを探し出し、コミットログで関連づけたチケットを検索します。

プラグインは、ジョブ -> ビルド -> チェンジセット -> リビジョン -> チケット の順に追跡を行います。
ビルドやチェンジセットは非常に数が多くなるので、ジョブ毎に追跡するビルドの数や、チェンジセットの数を制限しました。
ビルドやチェンジセットの上限は、設定ページで変更することができます。
管理 -> プラグイン -> Redmine Hudson Plugin にある 設定のリンクから設定ページに移動してください。

=== rake タスクを使ってHudsonの情報を取得することができます

redmine_hudson:fetch タスクを使ってください
rake タスクを使って情報を取得する場合は、必ず 自動取得モード（後述します）を OFF にしてください

=== 必要のなくなったビルド情報を削除することができます

ジョブごとに保持する期間や件数をカスタマイズすることができます。

=== プロジェクト毎に設定ができます

* ハドソンのURL (httpsも一応使えます)
ユーザがアクセスするURLとプラグインがアクセスするURLを分けて管理することができます。
* ハドソンにアクセス際利用する認証用のユーザ名とパスワード
* テスト結果とチェンジセットを取得しないように (テスト結果とチェンジセットを取得すると結構時間がかかるので)
* 表示するジョブ
* コンパクトモード (ジョブの名前と最新のビルド結果のみ表示します)
* ヘルスレポートの設定（キーワードと、リンク先のURL）

=== プラグイン全体の設定ができます

管理 -> プラグイン -> Redmine Hudson Plugin にある 設定のリンクから設定ページに移動してください。

* ジョブの説明で利用する書式（HTMLで書く、Textileで書くのいずれかを選ぶことができます）
* 自動取得モード（一覧を表示する際に、最新の情報を取得します）
* ジョブごとに追跡するビルドの件数（チケットの検索で利用します）
* ジョブごとに追跡するチェンジセットの件数（チケットの検索で利用します）

== 言語ファイル作成者（ありがとうございます）

[de.yml] Jens Goldhammer, Florian Bartels
[es.yml] juancayetano.delgado
[fr.yml] Francois-Xavier CAUVIN
[hu.yml] Péter Major
[it.yml] Marco Bazzani
[ru.yml] Eugene Sirotkin.
[zh.yml] Billy T

== インストール方法

=== プラグインをインストールする

1. プラグインを vendor/plugins ディレクトリにコピーします
2. コマンドを実行します 'rake db:migrate_plugins RAILS_ENV=production'
3. Redmine を開始します

=== プロジェクトでプラグインを利用する

1. プロジェクトの設定ページに移動します
2. 'モジュール' をクリックします
3. 'Hudson' をチェックして、保存します

=== Hudson の設定を変更します

1. 'Hudson' タブをクリックします
2. サイドバーにある '設定' をクリックします
3. 設定を編集します（URLや、表示したいジョブを設定しましょう）

=== ジョブを確認します

1. 'Hudson' タブをクリックします（初回はかなり時間がかかるでしょう）

== 注意事項

=== ハドソン 1.313 以上を推奨します
バージョンが 1.313 より古い場合は、テスト結果やチェンジセットが取得できず、履歴に表示できないかもしれません。
テスト結果やチェンジセットが取得できなくても、ビルド情報だけは保存します。が、一度失敗すると二度と取得しません。

=== IE8について
互換モードを使ってください。

=== 排他処理について
現在、排他処理が入っていないので、Redmine が複数のサーバで動作している場合は上手く動かない場合があります。
排他処理については、できれば何とかしたいと思っています。

=== どうしようもなくなったら？

設定ページの履歴を削除 ボタンを使ってデータベースの内容を初期化してみてください。
状況が改善するかもしれません。

== 変更履歴

=== 1.0.8

* ##947 (機能) ドイツ語がより正確に
* ##1010 (バグ) Redmine1.4で動かない

=== 1.0.7

* ##682 (バグ) ライセンスが設定されてない
* ##675 (バグ) db:migrate_plugins down が失敗する
* ##713 (Defect) プラグインが利用するURLが設定できない
* ##714 (Feature) オランダ語対応
* ##769 (Feature) ロシア語対応

=== 1.0.6.1

* ##563 (バグ) 1つのジョブだけ rotate をONにしていると、rotate をOFFにできない
* ##515 (バグ) ビルドの保存の設定時にエラー

=== 1.0.6

* ##476 (機能) Atom フォーマットのサポート (thanks! Akiko Takano)

=== 1.0.5

* ##411 (機能) 中国語対応
* ##387 (バグ) Hudson.fetch でHudsonApiException が発生すると、エラーが出てしまう
* ##386 (機能) 権限の名前をローカライズ

=== 1.0.4

* ##367 (バグ) 履歴の削除に失敗する
* ##366 (バグ) プロジェクトの設定の新規登録時にヘルスレポートの設定を追加すると、失敗する
* ##344 (バグ) ヘルスレポートの設定が追加できない

=== 1.0.3.1

* ##318 (バグ) 幾つかのテストが redmine0.9.x で失敗する
* ##316 (バグ) Issue ページを開くとエラーが発生する

=== 1.0.3

* ##282 (バグ) Hudson の自動テストがRedmine 0.9で通らない
* ##304 (バグ) db:migrate_plugin が MySQL で失敗する
* ##306 (機能) ユーザがアクセスするURLとプラグインがアクセスするURLを分けて管理することができます
* ##314 (機能) イタリア語対応

=== 1.0.2

* ##198 (機能) ビルド成果物（アーティファクト）がダウンロードができます
* ##266 (機能) 必要がなくなったビルド情報を削除できる
* ##267 (機能) 指定したジョブやビルドに関連するチケットを検索できる
* ##235 (バグ) IEで活動ページのHudsonアイコンが表示されない
* ##273 (バグ) Hudsonから応答がない場合に、Internalエラーが発生する
* ##276 (バグ) Redmine0.9.x または trunk で translation missing が発生する
* ##284 (バグ) プロジェクトで設定を保存すると、エラーが発生する
* ##286 (バグ) Hudsonからチェンジセットの情報を取得できない
* ##288 (バグ) Redmine0.9.0でチケットにビルド結果が表示されない
* ##291 (バグ) db:migrate_plugins が PostgreSQL で失敗する

=== 1.0.1.1

* ##244 rcov がないと rake db:migrate_plugins が動かない
* ##242 Redmine0.8.7でジョブのビルドと履歴が動かない

=== 1.0.1

* ##228 インストール手順を追記しました
* ##225 設定が強制的に簡単表示になってしまう
* ##224 今日ビルドしたジョブが分かる
* ##219 Hudsonの活動をRSSで取得できない
* ##218 Anonymous で活動が表示されない
* ##212 最新のビルド結果を表示できない

=== 1.0.0

* rake タスクを使ってHudsonの情報が取得できるように。
* ジョブの説明に利用する書式が選べるように。
* ジョブの説明の表示／非表示をその場で切り替えられるように。

=== 0.1.6

* ヘルスレポートの設定が自由にできるように。

=== 0.1.5

* ビルド結果をチケットに表示するように. ハドソンのアイコンを使うように。

=== 0.1.4

* ビルド履歴を活動ページに表示するように。ビルドの情報はデータベースに保存するように。

=== 0.1.3

* Basic認証のバグを修正

=== 0.1.2

* https接続時のバグを修正

=== 0.1.1

* Basic認証と、httpsをサポート

=== 0.1.0

* 最初のリリース

== お問い合わせ

* Website  -> r-labs[http://www.r-labs.org/]
* Email    -> couger@kt.rim.or.jp
